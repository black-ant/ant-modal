# Z-Image-Turbo æ›´æ–°è¯´æ˜

## æ›´æ–°æ—¥æœŸ
2025-01-03

## æ›´æ–°å†…å®¹

### æ–°å¢ Pixel Art Style LoRA æ¨¡å‹

åœ¨ `z_image_turbo_deploy.py` ä¸­æ·»åŠ äº†åƒç´ è‰ºæœ¯é£æ ¼ LoRA æ¨¡å‹çš„è‡ªåŠ¨ä¸‹è½½ã€‚

#### æ¨¡å‹ä¿¡æ¯
- **ä»“åº“**: `tarn59/pixel_art_style_lora_z_image_turbo`
- **æ–‡ä»¶**: `pixel_art_style_z_image_turbo.safetensors`
- **ç±»å‹**: LoRA (Low-Rank Adaptation)
- **ç”¨é€”**: ä¸ºç”Ÿæˆçš„å›¾åƒæ·»åŠ åƒç´ è‰ºæœ¯é£æ ¼
- **ä¸‹è½½åœ°å€**: https://huggingface.co/tarn59/pixel_art_style_lora_z_image_turbo

#### æŠ€æœ¯å®ç°

```python
# ä¸‹è½½ Pixel Art Style LoRA
print(f"\nğŸ“¦ ä¸‹è½½åƒç´ è‰ºæœ¯é£æ ¼ LoRA...")
lora_repo_id = "tarn59/pixel_art_style_lora_z_image_turbo"
lora_filename = "pixel_art_style_z_image_turbo.safetensors"

try:
    print(f"ğŸ“¥ ä¸‹è½½ LoRA: {lora_filename}...")
    lora_cached_path = hf_hub_download(
        repo_id=lora_repo_id,
        filename=lora_filename,
        cache_dir="/cache",
        token=hf_token
    )
    lora_dir = "/root/comfy/ComfyUI/models/loras"
    Path(lora_dir).mkdir(parents=True, exist_ok=True)
    lora_target_path = f"{lora_dir}/{lora_filename}"
    subprocess.run(f"ln -sf {lora_cached_path} {lora_target_path}", shell=True, check=True)
    print(f"   âœ… Pixel Art Style LoRA å®Œæˆ")
except Exception as e:
    print(f"   âš ï¸ LoRA ä¸‹è½½å¤±è´¥ (å¯é€‰): {e}")
```

#### ç‰¹ç‚¹

1. **å®¹é”™å¤„ç†**: ä½¿ç”¨ try-except åŒ…è£¹ï¼Œå³ä½¿ LoRA ä¸‹è½½å¤±è´¥ä¹Ÿä¸å½±å“æ ¸å¿ƒæ¨¡å‹çš„éƒ¨ç½²
2. **ç¬¦å·é“¾æ¥**: ä½¿ç”¨è½¯é“¾æ¥é¿å…é‡å¤å­˜å‚¨ï¼ŒèŠ‚çœç©ºé—´
3. **è‡ªåŠ¨åˆ›å»ºç›®å½•**: ç¡®ä¿ loras ç›®å½•å­˜åœ¨
4. **HuggingFace ç¼“å­˜**: åˆ©ç”¨ HuggingFace Hub çš„ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤ä¸‹è½½

#### ä½¿ç”¨æ–¹æ³•

éƒ¨ç½²åï¼Œåœ¨ ComfyUI ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥ LoRAï¼š

1. æ·»åŠ  "Load LoRA" èŠ‚ç‚¹
2. é€‰æ‹© `pixel_art_style_z_image_turbo.safetensors`
3. è°ƒæ•´ LoRA å¼ºåº¦ï¼ˆæ¨è 0.6-1.0ï¼‰
4. è¿æ¥åˆ°æ¨¡å‹èŠ‚ç‚¹

#### æ•ˆæœç¤ºä¾‹

ä½¿ç”¨è¯¥ LoRA åï¼Œç”Ÿæˆçš„å›¾åƒä¼šå‘ˆç°åƒç´ è‰ºæœ¯é£æ ¼ï¼š
- åƒç´ åŒ–æ•ˆæœ
- å¤å¤æ¸¸æˆé£æ ¼
- æ¸…æ™°çš„åƒç´ è¾¹ç•Œ
- é€‚åˆåˆ¶ä½œæ¸¸æˆç´ æã€åƒç´ è‰ºæœ¯ä½œå“

## å®Œæ•´æ¨¡å‹åˆ—è¡¨

éƒ¨ç½²åå°†åŒ…å«ä»¥ä¸‹æ¨¡å‹ï¼š

### æ ¸å¿ƒæ¨¡å‹
1. **z_image_turbo_bf16.safetensors** (ä¸»æ‰©æ•£æ¨¡å‹)
   - æ¥æº: Comfy-Org/z_image_turbo
   - å¤§å°: ~12GB
   - ç”¨é€”: ä¸»è¦çš„å›¾åƒç”Ÿæˆæ¨¡å‹

2. **qwen_3_4b.safetensors** (CLIP æ–‡æœ¬ç¼–ç å™¨)
   - æ¥æº: Comfy-Org/z_image_turbo
   - å¤§å°: ~8GB
   - ç”¨é€”: å°†æ–‡æœ¬æç¤ºè¯ç¼–ç ä¸ºå‘é‡

3. **ae.safetensors** (VAE è§£ç å™¨)
   - æ¥æº: Comfy-Org/z_image_turbo
   - å¤§å°: ~335MB
   - ç”¨é€”: å°†æ½œåœ¨ç©ºé—´è§£ç ä¸ºå›¾åƒ

### é£æ ¼æ¨¡å‹
4. **pixel_art_style_z_image_turbo.safetensors** (Pixel Art LoRA) â­ æ–°å¢
   - æ¥æº: tarn59/pixel_art_style_lora_z_image_turbo
   - å¤§å°: ~100-200MB
   - ç”¨é€”: æ·»åŠ åƒç´ è‰ºæœ¯é£æ ¼

## éƒ¨ç½²å‘½ä»¤

```bash
modal deploy z_image_turbo_deploy.py
```

## éªŒè¯

éƒ¨ç½²æˆåŠŸåï¼Œå¯ä»¥åœ¨ ComfyUI çš„æ¨¡å‹åˆ—è¡¨ä¸­çœ‹åˆ°ï¼š
- Checkpoints: æ— ï¼ˆä½¿ç”¨ UNET åŠ è½½å™¨ï¼‰
- Diffusion Models: z_image_turbo_bf16.safetensors
- CLIP: qwen_3_4b.safetensors
- VAE: ae.safetensors
- LoRAs: pixel_art_style_z_image_turbo.safetensors âœ¨

## æ³¨æ„äº‹é¡¹

1. **HuggingFace Token**: å»ºè®®é…ç½® HuggingFace Secret ä»¥é¿å…ä¸‹è½½é™åˆ¶
   ```bash
   modal secret create huggingface-secret HF_TOKEN=hf_your_token
   ```

2. **å­˜å‚¨ç©ºé—´**: ç¡®ä¿ Volume æœ‰è¶³å¤Ÿç©ºé—´ï¼ˆè‡³å°‘ 25GBï¼‰

3. **ä¸‹è½½æ—¶é—´**: é¦–æ¬¡éƒ¨ç½²éœ€è¦ä¸‹è½½æ‰€æœ‰æ¨¡å‹ï¼Œå¯èƒ½éœ€è¦ 10-20 åˆ†é’Ÿ

4. **LoRA å¯é€‰**: å¦‚æœ LoRA ä¸‹è½½å¤±è´¥ï¼Œä¸ä¼šå½±å“æ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ä»¥åç»­æ‰‹åŠ¨æ·»åŠ 

## ç›¸å…³èµ„æº

- [Z-Image-Turbo å®˜æ–¹ä»“åº“](https://huggingface.co/Comfy-Org/z_image_turbo)
- [Pixel Art LoRA ä»“åº“](https://huggingface.co/tarn59/pixel_art_style_lora_z_image_turbo)
- [ComfyUI å®˜æ–¹æ–‡æ¡£](https://github.com/comfyanonymous/ComfyUI)
- [Modal ä½¿ç”¨æ•™ç¨‹](../../docs/Modalä½¿ç”¨æ•™ç¨‹.md)

## æ›´æ–°å†å²

- **2025-01-03**: æ·»åŠ  Pixel Art Style LoRA æ¨¡å‹è‡ªåŠ¨ä¸‹è½½
- **2024-12-XX**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«æ ¸å¿ƒæ¨¡å‹ä¸‹è½½
