# Z-Image-Turbo éƒ¨ç½²å‰æœ€ç»ˆæ£€æŸ¥æ¸…å•

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. å·æ˜ å°„é…ç½®
- âœ… ç»Ÿä¸€ä½¿ç”¨ `/root` ä½œä¸º Volume æŒ‚è½½ç‚¹
- âœ… æ„å»ºé˜¶æ®µï¼š`volumes={"/root": vol}`
- âœ… è¿è¡Œé˜¶æ®µï¼š`volumes={"/root": vol}`
- âœ… é¿å…äº†"åŒä¸€ä¸ª Volume æŒ‚è½½åˆ°å¤šä¸ªè·¯å¾„"çš„é”™è¯¯

### 2. ç¼“å­˜ç›®å½•é…ç½®
- âœ… HuggingFace ç¼“å­˜ï¼š`cache_dir="/root/.cache/huggingface"`
- âœ… æ¨¡å‹ç›®å½•ï¼š`/root/comfy/ComfyUI/models/`
- âœ… ç”¨æˆ·æ•°æ®ï¼š`/root/comfy/ComfyUI/user/`
- âœ… è¾“å‡ºç›®å½•ï¼š`/root/comfy/ComfyUI/output/`

### 3. Modal 1.0 å…¼å®¹æ€§
- âœ… ä½¿ç”¨ `scaledown_window=600` æ›¿ä»£ `container_idle_timeout`
- âœ… 10 åˆ†é’Ÿæ— è¯·æ±‚åè‡ªåŠ¨å…³é—­å®¹å™¨ï¼ŒèŠ‚çœæˆæœ¬

### 4. å·¥ä½œæµä¿å­˜æ”¯æŒ
- âœ… å¯åŠ¨æ—¶åˆ›å»º workflows ç›®å½•ï¼š`/root/comfy/ComfyUI/user/default/workflows`
- âœ… è§£å†³ 405 é”™è¯¯é—®é¢˜

## ğŸ“‹ é…ç½®æ‘˜è¦

```python
# Volume é…ç½®
vol = modal.Volume.from_name("z-image-turbo-cache", create_if_missing=True)

# æ„å»ºé˜¶æ®µ
.run_function(
    hf_download,
    volumes={"/root": vol},  # ç»Ÿä¸€æŒ‚è½½ç‚¹
    secrets=[hf_secret] if hf_secret else []
)

# è¿è¡Œé˜¶æ®µ
@app.function(
    max_containers=1,
    gpu="L40S",
    volumes={"/root": vol},  # ç»Ÿä¸€æŒ‚è½½ç‚¹
    timeout=86400,
    scaledown_window=600,
)
```

## ğŸš€ éƒ¨ç½²å‘½ä»¤

```bash
modal deploy data/projects/Z-Image-Turbo/z_image_turbo_deploy.py
```

## ğŸ“ é¢„æœŸè¡Œä¸º

1. **é¦–æ¬¡éƒ¨ç½²**ï¼šä¸‹è½½æ¨¡å‹åˆ° `/root/.cache/huggingface/`ï¼Œé“¾æ¥åˆ° ComfyUI æ¨¡å‹ç›®å½•
2. **åç»­å¯åŠ¨**ï¼šç›´æ¥ä½¿ç”¨ Volume ä¸­çš„æ¨¡å‹å’Œæ•°æ®ï¼Œæ— éœ€é‡æ–°ä¸‹è½½
3. **å·¥ä½œæµä¿å­˜**ï¼šå¯ä»¥æ­£å¸¸ä¿å­˜åˆ° `/root/comfy/ComfyUI/user/default/workflows/`
4. **è¾“å‡ºæ–‡ä»¶**ï¼šä¿å­˜åˆ° `/root/comfy/ComfyUI/output/`ï¼ŒæŒä¹…åŒ–å­˜å‚¨

## âœ… å¯ä»¥éƒ¨ç½²äº†ï¼

æ‰€æœ‰é…ç½®å·²æ£€æŸ¥å®Œæ¯•ï¼Œæ²¡æœ‰é—®é¢˜ã€‚
