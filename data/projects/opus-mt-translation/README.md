# Opus-MT è½»é‡çº§ç¿»è¯‘æœåŠ¡

ä½¿ç”¨ Helsinki-NLP çš„ Opus-MT æ¨¡å‹éƒ¨ç½²è¶…è½»é‡ã€ä½æˆæœ¬çš„ç¿»è¯‘æœåŠ¡ã€‚

## ç‰¹ç‚¹

- ğŸª¶ **è¶…è½»é‡**ï¼šå•ä¸ªæ¨¡å‹ä»… 300MBï¼ŒåŠ è½½å¿«
- ğŸ’° **æˆæœ¬æä½**ï¼šCPU å³å¯è¿è¡Œï¼Œçº¦ $0.05/å°æ—¶
- âš¡ **é€Ÿåº¦å¿«**ï¼šä¸“é—¨ä¼˜åŒ–çš„ç¿»è¯‘æ¨¡å‹
- ğŸ¯ **è´¨é‡å¥½**ï¼šç‰¹å®šè¯­è¨€å¯¹è´¨é‡ä¼˜ç§€
- ğŸ”§ **æ˜“éƒ¨ç½²**ï¼šæ— éœ€ GPUï¼Œé™ä½éƒ¨ç½²é—¨æ§›

## ç¡¬ä»¶è¦æ±‚

- **CPU**: 2 æ ¸ï¼ˆæ¨èï¼‰
- **å†…å­˜**: 2-4GB
- **GPU**: å¯é€‰ï¼ˆT4 å¯åŠ é€Ÿ 3-5 å€ï¼‰
- **æˆæœ¬**: çº¦ $0.05/å°æ—¶ï¼ˆCPUï¼‰æˆ– $0.20/å°æ—¶ï¼ˆT4ï¼‰

## æ”¯æŒçš„è¯­è¨€å¯¹

é»˜è®¤é¢„åŠ è½½çš„è¯­è¨€å¯¹ï¼š

- ğŸ‡¨ğŸ‡³ ä¸­æ–‡ â†”ï¸ ğŸ‡ºğŸ‡¸ è‹±è¯­
- ğŸ‡¨ğŸ‡³ ä¸­æ–‡ â†”ï¸ ğŸ‡¯ğŸ‡µ æ—¥è¯­
- ğŸ‡ºğŸ‡¸ è‹±è¯­ â†”ï¸ ğŸ‡¯ğŸ‡µ æ—¥è¯­

å¯æ·»åŠ æ›´å¤šè¯­è¨€å¯¹ï¼ŒæŸ¥çœ‹å®Œæ•´åˆ—è¡¨ï¼š
https://huggingface.co/Helsinki-NLP

## å¿«é€Ÿå¼€å§‹

### 1. éƒ¨ç½²æœåŠ¡

```bash
modal deploy opus_translator.py
```

### 2. æµ‹è¯•ç¿»è¯‘

```bash
modal run opus_translator.py
```

### 3. ä½¿ç”¨ API

```bash
# å•æ¡ç¿»è¯‘
curl -X POST https://your-app.modal.run/translate_api \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ä½ å¥½ï¼Œä¸–ç•Œï¼",
    "source_lang": "zh",
    "target_lang": "en"
  }'

# æ‰¹é‡ç¿»è¯‘
curl -X POST https://your-app.modal.run/translate_api \
  -H "Content-Type: application/json" \
  -d '{
    "texts": ["ä½ å¥½", "è°¢è°¢", "å†è§"],
    "source_lang": "zh",
    "target_lang": "en"
  }'

# æŸ¥çœ‹æ”¯æŒçš„è¯­è¨€å¯¹
curl https://your-app.modal.run/supported_languages
```

## æ·»åŠ æ–°è¯­è¨€å¯¹

åœ¨ `opus_translator.py` çš„ `language_pairs` åˆ—è¡¨ä¸­æ·»åŠ ï¼š

```python
language_pairs = [
    ("zh", "en"),  # ä¸­è¯‘è‹±
    ("en", "zh"),  # è‹±è¯‘ä¸­
    ("zh", "ja"),  # ä¸­è¯‘æ—¥
    ("ja", "zh"),  # æ—¥è¯‘ä¸­
    ("en", "ja"),  # è‹±è¯‘æ—¥
    ("ja", "en"),  # æ—¥è¯‘è‹±
    ("en", "fr"),  # è‹±è¯‘æ³• - æ–°å¢
    ("fr", "en"),  # æ³•è¯‘è‹± - æ–°å¢
    ("zh", "ko"),  # ä¸­è¯‘éŸ© - æ–°å¢
]
```

å¯ç”¨çš„è¯­è¨€å¯¹ç¤ºä¾‹ï¼š
- `en-de`: è‹±è¯­ â†’ å¾·è¯­
- `en-fr`: è‹±è¯­ â†’ æ³•è¯­
- `en-es`: è‹±è¯­ â†’ è¥¿ç­ç‰™è¯­
- `en-ru`: è‹±è¯­ â†’ ä¿„è¯­
- `zh-ko`: ä¸­æ–‡ â†’ éŸ©è¯­
- `ja-ko`: æ—¥è¯­ â†’ éŸ©è¯­

## å¯ç”¨ GPU åŠ é€Ÿ

å¦‚éœ€æ›´å¿«é€Ÿåº¦ï¼Œå¯ä»¥å¯ç”¨ GPUï¼š

1. ä¿®æ”¹ç±»è£…é¥°å™¨ï¼š
```python
@app.cls(
    image=image,
    gpu="T4",  # å¯ç”¨ T4 GPU
    volumes={"/models": model_volume},
)
```

2. å–æ¶ˆæ³¨é‡Šæ¨¡å‹åŠ è½½å’Œæ¨ç†ä¸­çš„ GPU ä»£ç ï¼š
```python
# åŠ è½½æ—¶
model = model.to("cuda")

# æ¨ç†æ—¶
inputs = {k: v.to("cuda") for k, v in inputs.items()}
```

## Python å®¢æˆ·ç«¯ç¤ºä¾‹

```python
import requests

API_URL = "https://your-app.modal.run/translate_api"

# å•æ¡ç¿»è¯‘
def translate(text, src="zh", tgt="en"):
    response = requests.post(API_URL, json={
        "text": text,
        "source_lang": src,
        "target_lang": tgt
    })
    return response.json()["translation"]

# æ‰¹é‡ç¿»è¯‘
def batch_translate(texts, src="zh", tgt="en"):
    response = requests.post(API_URL, json={
        "texts": texts,
        "source_lang": src,
        "target_lang": tgt
    })
    return response.json()["translations"]

# ä½¿ç”¨ç¤ºä¾‹
print(translate("ä½ å¥½ï¼Œä¸–ç•Œï¼"))
# è¾“å‡º: Hello, world!

results = batch_translate(["ä½ å¥½", "è°¢è°¢", "å†è§"])
print(results)
# è¾“å‡º: ['Hello', 'Thank you', 'Goodbye']
```

## æ€§èƒ½å¯¹æ¯”

| æ¨¡å‹ | å‚æ•°é‡ | ç¡¬ä»¶ | é€Ÿåº¦ | æˆæœ¬/å°æ—¶ | é€‚ç”¨åœºæ™¯ |
|------|--------|------|------|-----------|----------|
| Opus-MT | 300M | CPU | å¿« | $0.05 | ç‰¹å®šè¯­è¨€å¯¹ |
| NLLB-600M | 600M | T4 | ä¸­ | $0.20 | å¤šè¯­è¨€æ”¯æŒ |
| NLLB-1.3B | 1.3B | A10G | ä¸­ | $0.60 | é«˜è´¨é‡ç¿»è¯‘ |
| DeepSeek-V3 | 671B | H100 | æ…¢ | $4.00+ | æœ€é«˜è´¨é‡ |

## æˆæœ¬ä¼°ç®—

åŸºäº Modal çš„ CPU å®šä»·ï¼ˆçº¦ $0.05/å°æ—¶ï¼‰ï¼š

| ä½¿ç”¨é‡ | æ¯å°æ—¶ç¿»è¯‘ | æœˆæˆæœ¬ï¼ˆ8h/å¤©ï¼‰ |
|--------|-----------|----------------|
| è½»åº¦ | 1000 æ¡ | $12 |
| ä¸­åº¦ | 5000 æ¡ | $12 |
| é‡åº¦ | 10000+ æ¡ | $12 |

## ä¼˜åŒ–å»ºè®®

### 1. æ‰¹é‡å¤„ç†

æ‰¹é‡ç¿»è¯‘æ¯”å•æ¡ç¿»è¯‘æ•ˆç‡é«˜ 3-5 å€ï¼š

```python
# âŒ ä½æ•ˆ
for text in texts:
    translate(text)

# âœ… é«˜æ•ˆ
batch_translate(texts)
```

### 2. é¢„åŠ è½½å¸¸ç”¨è¯­è¨€å¯¹

åªåŠ è½½éœ€è¦çš„è¯­è¨€å¯¹ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´å’Œå†…å­˜å ç”¨ã€‚

### 3. è°ƒæ•´å®¹å™¨é…ç½®

```python
@app.cls(
    cpu=2.0,                      # CPU æ ¸å¿ƒæ•°
    container_idle_timeout=300,   # ç©ºé—²è¶…æ—¶
    timeout=600,                  # è¯·æ±‚è¶…æ—¶
)
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é€‰æ‹© Opus-MT è¿˜æ˜¯ NLLBï¼Ÿ

A: 
- **Opus-MT**: é¢„ç®—æœ‰é™ï¼Œåªéœ€å‡ ä¸ªè¯­è¨€å¯¹ï¼Œè¿½æ±‚æè‡´æ€§ä»·æ¯”
- **NLLB**: éœ€è¦æ”¯æŒå¤šç§è¯­è¨€ï¼Œè¿½æ±‚æ›´é«˜è´¨é‡

### Q: CPU æ¨¡å¼æ€§èƒ½å¦‚ä½•ï¼Ÿ

A: å•æ¡ç¿»è¯‘çº¦ 100-200msï¼Œæ‰¹é‡ç¿»è¯‘æ›´å¿«ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨è¶³å¤Ÿã€‚

### Q: å¯ä»¥åŒæ—¶æ”¯æŒå¤šä¸ªè¯­è¨€å¯¹å—ï¼Ÿ

A: å¯ä»¥ï¼Œåœ¨ `language_pairs` ä¸­æ·»åŠ å³å¯ã€‚æ¯ä¸ªæ¨¡å‹çº¦ 300MBã€‚

### Q: ç¿»è¯‘è´¨é‡å¦‚ä½•ï¼Ÿ

A: å¯¹äºå¸¸è§è¯­è¨€å¯¹ï¼ˆå¦‚ä¸­è‹±ã€è‹±æ—¥ï¼‰ï¼Œè´¨é‡æ¥è¿‘å•†ä¸šç¿»è¯‘ APIã€‚

## ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

### vs Google Translate API
- âœ… æˆæœ¬æ›´ä½ï¼ˆçº¦ 1/10ï¼‰
- âœ… æ•°æ®éšç§ï¼ˆè‡ªæ‰˜ç®¡ï¼‰
- âŒ è¯­è¨€æ”¯æŒè¾ƒå°‘

### vs NLLB
- âœ… æˆæœ¬æ›´ä½ï¼ˆçº¦ 1/4ï¼‰
- âœ… é€Ÿåº¦æ›´å¿«
- âŒ è¯­è¨€æ”¯æŒè¾ƒå°‘
- âŒ è´¨é‡ç•¥ä½

### vs DeepSeek/GPT
- âœ… æˆæœ¬æä½ï¼ˆçº¦ 1/100ï¼‰
- âœ… é€Ÿåº¦å¿«å¾—å¤š
- âŒ ä¸æ”¯æŒä¸Šä¸‹æ–‡ç†è§£
- âŒ ä¸æ”¯æŒé£æ ¼è°ƒæ•´

## ç›¸å…³èµ„æº

- [Opus-MT é¡¹ç›®](https://github.com/Helsinki-NLP/Opus-MT)
- [Hugging Face æ¨¡å‹åº“](https://huggingface.co/Helsinki-NLP)
- [Modal æ–‡æ¡£](https://modal.com/docs)

## è®¸å¯è¯

Opus-MT æ¨¡å‹ä½¿ç”¨ Apache 2.0 è®¸å¯è¯ï¼Œå¯å•†ç”¨ã€‚
